# ğŸ—ï¸ Laboratorio de Microservicios (Django + React)

Este proyecto implementa una arquitectura de microservicios completa utilizando Django para los servicios backend, React para el frontend, y Docker Compose para la orquestaciÃ³n de contenedores.

## ğŸ“‹ DescripciÃ³n del Proyecto

El **Microservices Lab** es un sistema distribuido que demuestra las mejores prÃ¡cticas en el desarrollo de microservicios. Cada servicio tiene una responsabilidad especÃ­fica y se comunica con otros servicios a travÃ©s de APIs REST bien definidas.

### ğŸ¯ Objetivos del Proyecto
- Implementar una arquitectura de microservicios escalable
- Demostrar la comunicaciÃ³n entre servicios independientes
- Utilizar contenedores Docker para el despliegue
- Implementar patrones de diseÃ±o de microservicios
- Proporcionar una base sÃ³lida para el aprendizaje y desarrollo

## ğŸ›ï¸ Arquitectura del Sistema

### Diagrama de Arquitectura
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USUARIO                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 REVERSE PROXY                               â”‚
â”‚                   (NGINX)                                   â”‚
â”‚              Puerto: 80/443                                 â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚         â”‚         â”‚
      â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTENDâ”‚ â”‚  AUTH   â”‚ â”‚  BLOG   â”‚ â”‚     EMAIL       â”‚
â”‚ (React) â”‚ â”‚SERVICE  â”‚ â”‚SERVICE  â”‚ â”‚    SERVICE      â”‚
â”‚Port:3000â”‚ â”‚Port:8001â”‚ â”‚Port:8002â”‚ â”‚   Port:8003     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚           â”‚               â”‚
                  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
              â”‚ PostgreSQL  â”‚ â”‚   Redis   â”‚
              â”‚ Puerto:5432 â”‚ â”‚Puerto:6379â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ Flujo de ComunicaciÃ³n
1. **Usuario** â†’ **Reverse Proxy** (Punto de entrada Ãºnico)
2. **Reverse Proxy** â†’ **Servicios** (Enrutamiento inteligente)
3. **Servicios** â†” **Base de Datos** (Persistencia de datos)
4. **Servicios** â†” **Redis** (Cache y sesiones)
5. **Servicios** â†” **Otros Servicios** (ComunicaciÃ³n inter-servicios)

## ğŸ§© Servicios Implementados

### ğŸ” Auth Service (Puerto 8001)
**PropÃ³sito**: GestiÃ³n centralizada de autenticaciÃ³n y autorizaciÃ³n
- **Funcionalidades**:
  - Registro y login de usuarios
  - GeneraciÃ³n y validaciÃ³n de tokens JWT
  - GestiÃ³n de perfiles de usuario
  - Middleware de autenticaciÃ³n para otros servicios
- **TecnologÃ­as**: Django, Django REST Framework, JWT
- **Base de Datos**: PostgreSQL (tabla de usuarios)
- **Cache**: Redis (tokens y sesiones)

### ğŸ“ Blog Service (Puerto 8002)
**PropÃ³sito**: GestiÃ³n completa del contenido del blog
- **Funcionalidades**:
  - CRUD de publicaciones (posts)
  - GestiÃ³n de autores y perfiles
  - Sistema de categorÃ­as y etiquetas
  - Comentarios y interacciones
  - BÃºsqueda y filtrado de contenido
- **TecnologÃ­as**: Django, Django REST Framework
- **Base de Datos**: PostgreSQL (posts, categorÃ­as, comentarios)
- **IntegraciÃ³n**: Auth Service (validaciÃ³n de usuarios)

### ğŸ“§ Email Service (Puerto 8003)
**PropÃ³sito**: GestiÃ³n de notificaciones y comunicaciones por email
- **Funcionalidades**:
  - EnvÃ­o de emails transaccionales
  - Plantillas de correo dinÃ¡micas
  - Notificaciones de nuevos posts
  - Confirmaciones de registro
  - Sistema de suscripciones
- **TecnologÃ­as**: Django, SMTP, Celery (opcional)
- **IntegraciÃ³n**: Blog Service (notificaciones), Auth Service (usuarios)

### ğŸŒ Frontend (Puerto 3000)
**PropÃ³sito**: Interfaz de usuario web
- **Funcionalidades**:
  - SPA (Single Page Application) con React
  - AutenticaciÃ³n de usuarios
  - GestiÃ³n de contenido del blog
  - Dashboard administrativo
  - Interfaz responsive y moderna
- **TecnologÃ­as**: React, React Router, Axios, Material-UI/Bootstrap
- **ComunicaciÃ³n**: API REST a travÃ©s del Reverse Proxy

### ğŸ”„ Reverse Proxy
**PropÃ³sito**: Gateway y balanceador de carga
- **Funcionalidades**:
  - Enrutamiento de peticiones HTTP/HTTPS
  - TerminaciÃ³n SSL/TLS
  - Balanceo de carga
  - CompresiÃ³n y cache de respuestas
  - PÃ¡ginas de error personalizadas
- **TecnologÃ­as**: NGINX
- **ConfiguraciÃ³n**: Enrutamiento por path (`/auth/*`, `/blog/*`, `/email/*`)

## ğŸ—„ï¸ Servicios de Infraestructura

### ğŸ˜ PostgreSQL (Puerto 5432)
- **Base de datos principal** para todos los servicios
- **ConfiguraciÃ³n**:
  - Usuario: `devuser`
  - ContraseÃ±a: `devpass`
  - Base de datos: `main_db`
- **Persistencia**: Volumen Docker `pgdata`

### ğŸ”´ Redis (Puerto 6379)
- **Cache en memoria** y almacÃ©n de sesiones
- **Usos**:
  - Cache de consultas frecuentes
  - Almacenamiento de tokens JWT
  - Sesiones de usuario
  - Cola de tareas (opcional con Celery)

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### Prerequisitos
- **Docker Desktop** instalado y funcionando
- **Docker Compose v2** disponible
- **Git** para clonar el repositorio
- **4GB RAM** mÃ­nimo recomendado

### Pasos de InstalaciÃ³n

1. **Clonar el repositorio**
   ```bash
   git clone <url-del-repositorio>
   cd Microservicios/microservices-lab
   ```

2. **Configurar variables de entorno**
   ```bash
   cp ../.env.example ../.env
   # Editar .env con tus configuraciones especÃ­ficas
   ```

3. **Construir y ejecutar los servicios**
   ```bash
   # Iniciar servicios base (PostgreSQL y Redis)
   docker compose up -d postgres redis
   
   # Verificar que los servicios base estÃ¡n funcionando
   docker compose ps
   
   # Iniciar todos los servicios
   docker compose up -d
   ```

4. **Verificar el estado de los servicios**
   ```bash
   docker compose ps
   docker compose logs -f
   ```

### Accesos y URLs

| Servicio | URL Local | DescripciÃ³n |
|----------|-----------|-------------|
| Frontend | http://localhost:3000 | Interfaz principal |
| Auth API | http://localhost:8001 | API de autenticaciÃ³n |
| Blog API | http://localhost:8002 | API del blog |
| Email API | http://localhost:8003 | API de emails |
| PostgreSQL | localhost:5432 | Base de datos |
| Redis | localhost:6379 | Cache y sesiones |

### Credenciales por Defecto
- **PostgreSQL**: 
  - Host: `localhost:5432`
  - Usuario: `devuser`
  - ContraseÃ±a: `devpass`
  - Base de datos: `main_db`
- **Redis**: 
  - Host: `localhost:6379`
  - Sin contraseÃ±a por defecto

## ğŸ› ï¸ Comandos Ãštiles

### Docker Compose
```bash
# Iniciar todos los servicios
docker compose up -d

# Ver logs de todos los servicios
docker compose logs -f

# Ver logs de un servicio especÃ­fico
docker compose logs -f auth-service

# Parar todos los servicios
docker compose down

# Parar y eliminar volÃºmenes
docker compose down -v

# Reconstruir imÃ¡genes
docker compose up --build

# Ver estado de los servicios
docker compose ps
```

### Desarrollo
```bash
# Acceder al contenedor de un servicio
docker compose exec auth-service bash

# Ejecutar migraciones de Django
docker compose exec auth-service python manage.py migrate

# Crear superusuario
docker compose exec auth-service python manage.py createsuperuser

# Ver logs en tiempo real
docker compose logs -f --tail=100
```

## ğŸ“‹ Lista de Tareas del Proyecto

### âœ… Tareas Completadas
- [x] ConfiguraciÃ³n inicial de Docker Compose
- [x] ImplementaciÃ³n de servicios base (PostgreSQL, Redis)
- [x] Estructura bÃ¡sica de microservicios
- [x] DocumentaciÃ³n de arquitectura
- [x] README detallado del blog-service
- [x] ConfiguraciÃ³n de variables de entorno

### ğŸ”„ Tareas en Progreso
- [ ] ImplementaciÃ³n completa del Auth Service
  - [ ] Modelos de usuario Django
  - [ ] Endpoints de registro/login
  - [ ] GeneraciÃ³n de tokens JWT
  - [ ] Middleware de autenticaciÃ³n
- [ ] Desarrollo del Blog Service
  - [ ] Modelos de Post, Author, Category
  - [ ] API REST completa (CRUD)
  - [ ] Sistema de comentarios
  - [ ] BÃºsqueda y filtros
- [ ] ConfiguraciÃ³n del Email Service
  - [ ] IntegraciÃ³n SMTP
  - [ ] Plantillas de email
  - [ ] Sistema de notificaciones
- [ ] Desarrollo del Frontend React
  - [ ] ConfiguraciÃ³n inicial de React
  - [ ] Componentes de autenticaciÃ³n
  - [ ] Interfaz del blog
  - [ ] Dashboard administrativo

### ğŸ“… Tareas Pendientes
- [ ] ConfiguraciÃ³n del Reverse Proxy (NGINX)
  - [ ] ConfiguraciÃ³n de enrutamiento
  - [ ] Certificados SSL para desarrollo
  - [ ] PÃ¡ginas de error personalizadas
- [ ] Testing y Calidad
  - [ ] Tests unitarios para cada servicio
  - [ ] Tests de integraciÃ³n
  - [ ] ConfiguraciÃ³n de CI/CD
- [ ] Monitoreo y Observabilidad
  - [ ] Logging centralizado
  - [ ] MÃ©tricas de rendimiento
  - [ ] Health checks
- [ ] Seguridad
  - [ ] ConfiguraciÃ³n de CORS
  - [ ] Rate limiting
  - [ ] ValidaciÃ³n de entrada
- [ ] DocumentaciÃ³n
  - [ ] API documentation (Swagger/OpenAPI)
  - [ ] GuÃ­as de desarrollo
  - [ ] Diagramas de secuencia

### ğŸš€ Mejoras Futuras
- [ ] ImplementaciÃ³n de Kubernetes
- [ ] Microservicio de notificaciones en tiempo real
- [ ] Sistema de mÃ©tricas con Prometheus/Grafana
- [ ] ImplementaciÃ³n de Event Sourcing
- [ ] API Gateway con autenticaciÃ³n centralizada
- [ ] ImplementaciÃ³n de Circuit Breaker pattern
- [ ] Cache distribuido con Redis Cluster

## ğŸ§ª Testing

### Ejecutar Tests
```bash
# Tests de un servicio especÃ­fico
docker compose exec auth-service python manage.py test

# Tests con coverage
docker compose exec auth-service coverage run --source='.' manage.py test
docker compose exec auth-service coverage report
```

### Tests de IntegraciÃ³n
```bash
# Verificar conectividad entre servicios
docker compose exec auth-service python test_connection.py
```

## ğŸ“š Recursos y Referencias

### DocumentaciÃ³n TÃ©cnica
- [Django Documentation](https://docs.djangoproject.com/)
- [Django REST Framework](https://www.django-rest-framework.org/)
- [React Documentation](https://reactjs.org/docs/)
- [Docker Compose Reference](https://docs.docker.com/compose/)

### Patrones de Microservicios
- [Microservices Patterns](https://microservices.io/patterns/)
- [12-Factor App](https://12factor.net/)
- [API Design Guidelines](https://restfulapi.net/)

## ğŸ¤ ContribuciÃ³n

### CÃ³mo Contribuir
1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit tus cambios (`git commit -am 'Agrega nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crea un Pull Request

### EstÃ¡ndares de CÃ³digo
- Seguir PEP 8 para cÃ³digo Python
- Usar ESLint para cÃ³digo JavaScript/React
- Documentar todas las funciones y clases
- Escribir tests para nuevas funcionalidades

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Ver el archivo `LICENSE` para mÃ¡s detalles.

## ğŸ“ Soporte

Para reportar bugs, solicitar funcionalidades o hacer preguntas:
- Crear un issue en el repositorio
- Contactar al equipo de desarrollo
- Revisar la documentaciÃ³n existente

---

**Nota**: Este es un proyecto educativo diseÃ±ado para demostrar conceptos de microservicios. Para uso en producciÃ³n, considera implementar medidas adicionales de seguridad, monitoreo y escalabilidad.
